<!DOCTYPE html>
<html>

<head>
    <title>Interactive Chest</title>
    <style>
        body,
        html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background-color: #000000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        #chestImageContainer {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 30px;
        }

        @media only screen and (max-width: 600px) {
            #chestImageContainer {
                width: 80%;
            }
        }

        #passwordContainer {
            text-align: center;
            margin-top: 10px;
            width: 100%;
        }

        canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 9999;
            pointer-events: none;
        }
    </style>
</head>

<body>

    <canvas id="myCanvas"></canvas>

    <div id="chestImageContainer">
        <img id="chestImage" src="Atlantis_golden_mysterious_chest.png" alt="Chest Image">
    </div>


    <div id="passwordContainer">
        <input type="password" id="password" placeholder="Enter the password">
        <button onclick="unlockChest()">Unlock</button>
    </div>

    <script>
         const canvas = document.getElementById('myCanvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const keyImage = new Image();
        keyImage.src = "A_golden_Atlantis_Treasure_chest_key.png";

        let passwordCorrect = false;
        let isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);

        function unlockChest() {
            const password = document.getElementById("password").value;

            if (password === "Atlantis") {
                passwordCorrect = true;
                if (isMobile) {
                    drawKey(100, 100); // Draw initial mobile key
                    canvas.addEventListener('touchstart', function(e) {
                    const touch = e.changedTouches[0];
                    const x = touch.pageX;
                    const y = touch.pageY;
                    drawKey(x, y);
                });
                }
            } 
            else if (password !== "") {
                alert('Wrong password. Try again.');
            }
        }

    function drawKey(x, y) {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.drawImage(keyImage, x, y, keyImage.width * 0.1, keyImage.height * 0.1);
    }

    document.addEventListener('mousemove', function(e) {
      if (passwordCorrect) {
        const x = e.clientX;
        const y = e.clientY;
        drawKey(x, y);
      }
    });

    document.addEventListener('touchmove', function(e) {
      if (passwordCorrect) {
        const touch = e.changedTouches[0];
        const x = touch.pageX;
        const y = touch.pageY;
        drawKey(x, y);
      }
    });

    document.addEventListener('mouseup', function() {
      if (passwordCorrect) {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
      }
    });

    document.addEventListener('touchend', function() {
      if (passwordCorrect) {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
      }
    });
  </script>
</body>

</html>